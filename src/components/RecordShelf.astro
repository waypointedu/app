---
import RecordCard from './RecordCard.astro';

const { id, label, records = [] } = Astro.props as {
  id: string;
  label: string;
  records?: any[];
};

const trackId = `${id}-track`;
---
<section class="shelf" role="region" aria-label={label} data-shelf>
  <header class="shelf__head">
    <div>
      <h2 class="text-2xl font-semibold">{label}</h2>
      <p class="card__meta text-sm">Featured selections from our editors.</p>
    </div>
    <div class="shelf__controls">
      <button type="button" data-shelf-prev aria-controls={trackId} aria-label={`Previous on ${label} shelf`}>
        ←
      </button>
      <button type="button" data-shelf-next aria-controls={trackId} aria-label={`Next on ${label} shelf`}>
        →
      </button>
    </div>
  </header>
  <div
    id={trackId}
    class="shelf__track"
    role="listbox"
    aria-label={label}
    aria-orientation="horizontal"
    tabindex="0"
    data-shelf-track
  >
    {records.map((record, index) => (
      <div
        class="item"
        role="option"
        tabindex={index === 0 ? 0 : -1}
        aria-selected={index === 0}
        data-shelf-item
      >
        <RecordCard {...record} />
      </div>
    ))}
  </div>
</section>
