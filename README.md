# Waypoint Digital Library

Waypoint Digital Library is a static-first reference implementation of a university-caliber digital library that can run entirely on GitHub Pages. The project pairs Astro, Tailwind CSS, and lightweight Alpine.js islands with a GitHub Actions publishing pipeline that converts Markdown source files into web, EPUB, and PDF deliverables.

## Features

- **Astro + Tailwind UI:** Component-driven site shell with dark mode, responsive layouts, and reusable design primitives.
- **Record-driven architecture:** Catalog metadata is stored in `_records/` Markdown files with YAML front matter, while long-form works live in `books/<slug>/` folders.
- **Client-side discovery:** A prebuilt `/search/index.json` is queried with Fuse.js for search and filtering experiences.
- **Readers:** Inline PDF previews, EPUB reader shell, and placeholders for IIIF Mirador integration.
- **Automation:** GitHub Actions workflows stubbed for building the search index, validating metadata, and deploying the Astro site.

## Repository Layout

```
src/
  components/      UI primitives such as RecordCard, MetadataTable, DownloadButtons
  layouts/         Base shells for records, search, policies, and reading views
  pages/           Astro routes for home, search, browse, record, and policies
  styles/          Tailwind base styles and long-form reading CSS
  data/            Controlled vocabularies and site settings
  lib/             Client helpers (search, facets, schema generators)
books/             Source Markdown for reading editions + book.yml metadata
_records/          Catalog metadata records with descriptive abstracts
search/index.json  Prebuilt search index (generated by Actions)
scripts/           Node utilities for indexing and validation
.github/workflows/ CI configuration for build and validation pipelines
```

## Local Development

```bash
npm install
npm run dev
```

## Deployment to GitHub Pages

The repository ships with a GitHub Actions workflow (`.github/workflows/build.yml`) that
builds the Astro site, packages the contents of `dist/`, and publishes the artifact to
GitHub Pages. To activate automatic deploys:

1. Push the project to GitHub and open **Settings → Pages**.
2. Under **Build and deployment**, choose **Source → GitHub Actions** (you do not need to
   select a branch). Choosing **Deploy from a branch** disables the workflow-driven publish
   and will leave the site stuck in a "pending" state.
3. Commit to the default branch (e.g., `main`). Every push triggers the workflow which
   runs the build and then calls `actions/deploy-pages` to publish the site.
4. Watch the workflow run under **Actions → Build and Deploy**. Once the `deploy` job
   finishes, the run summary shows the live Pages URL.

For test deploys from a feature branch, run the workflow manually by opening the latest
successful build job and selecting **Run workflow** (or merge the branch into `main` to
publish automatically). If a deployment seems stuck, confirm that the most recent
workflow completed successfully—Pages will only publish artifacts produced by the
Actions pipeline.

## License

Released under the MIT License. See `LICENSE` for details.
